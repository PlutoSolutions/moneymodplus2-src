package cat.yoink.dream.impl.module.exploit;

import cat.yoink.dream.api.module.Category;
import cat.yoink.dream.api.module.Module;
import cat.yoink.dream.api.setting.Setting;
import cat.yoink.dream.api.setting.SettingType;
import cat.yoink.dream.impl.event.PacketSendEvent;
import cat.yoink.dream.mixin.mixins.accessor.ICPacketPlayer;
import net.minecraft.network.play.client.CPacketEntityAction;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;

public class AntiHunger extends Module {
	private final Setting sprint = new Setting.Builder(SettingType.BOOLEAN).setName("Cancel Sprint").setModule(this)
			.setBooleanValue(true).build();

	public AntiHunger(String name, String description, Category category) {
		super(name, description, category);
		addSetting(sprint);
		// TODO Auto-generated constructor stub
	}

	@SubscribeEvent
	public void sendpack(PacketSendEvent event) {
		if (event.getPacket() instanceof CPacketPlayer) {

			// ((ICPacketPlayer)event.getPacket())

			CPacketPlayer packet = (CPacketPlayer) event.getPacket();
			ICPacketPlayer shit = (ICPacketPlayer) packet;
			shit.setOnGround(mc.player.fallDistance >= 0.0f || mc.playerController.getIsHittingBlock());
			// ((ICPacketPlayer)packet)
			// packet.onGround = (mc.player.fallDistance >= 0.0f ||
			// mc.playerController.isHittingBlock);
		}
		if (this.sprint.getBooleanValue() && event.getPacket() instanceof CPacketEntityAction) {
			final CPacketEntityAction packet2 = (CPacketEntityAction) event.getPacket();
			if (packet2.getAction() == CPacketEntityAction.Action.START_SPRINTING
					|| packet2.getAction() == CPacketEntityAction.Action.STOP_SPRINTING) {
				event.setCanceled(true);
			}
		}
	}

}
